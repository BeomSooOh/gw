var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(q,a,b){q instanceof String&&(q=String(q));for(var c=q.length,d=0;d<c;d++){var g=q[d];if(a.call(b,g,d,q))return{i:d,v:g}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(q,a,b){q!=Array.prototype&&q!=Object.prototype&&(q[a]=b.value)};$jscomp.getGlobal=function(q){return"undefined"!=typeof window&&window===q?q:"undefined"!=typeof global&&null!=global?global:q};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(q,a,b,c){if(a){b=$jscomp.global;q=q.split(".");for(c=0;c<q.length-1;c++){var d=q[c];d in b||(b[d]={});b=b[d]}q=q[q.length-1];c=b[q];a=a(c);a!=c&&null!=a&&$jscomp.defineProperty(b,q,{configurable:!0,writable:!0,value:a})}};$jscomp.polyfill("Array.prototype.find",function(q){return q?q:function(a,b){return $jscomp.findInternal(this,a,b).v}},"es6","es3");
var g_driveFileListViewMgr=function(q){this.m_SortType=VIEWSORT.NAME;this.m_nSortArrowImgDegree=-90;this.m_SortOption=CLOUD_CMD_SORT_TITE;this.m_FilterType=VIEWFILTER.ALL;this.m_FilterOption=CLOUD_CMD_FILTER_ALL;this.m_SearchMgr=null;this.m_nUpdateSharePermCntSuccessCB=this.m_nUpdateSharePermCnt=0;this.m_bDirectFolder=this.m_bChkListInit=!1;this.m_aStrUpperFolderSeq=[{parentSeq:"",curTitle:"ONEFFICE"}];this.m_nListViewType=q;this.m_ctrlThumbnailPanel=this.m_divFileListContainer=null;this.m_nCheckLstInitMode=
0;this.m_bSync=this.m_bThumbSortLayerMenu=!1;this.m_CurThumbnailViewListData=[];this.lastSelectData=this.lastSelectBtn=this.firstShiftBtn=null;this.isSeparate=!1;this.getSearchMgr=function(){return this.m_SearchMgr};this.setSearchMgr=function(a){this.m_SearchMgr=a};this.getSelectionInfo=function(){return new CloudSelectionInfo};this.initFileListView=function(a){a=document.getElementById("dze_idx_filelist");if(fnObjectCheckNull(a))return!1;a.innerHTML="";a.style.display="none";return!0};this.initThumbListView=
function(){this.m_ctrlThumbnailPanel&&(this.m_ctrlThumbnailPanel.innerHTML="")};this.initThumbCtrlInfo=function(){var a=document.getElementById("drive_thumbnailItemPanel");if(!1===fnObjectCheckNull(a)){var b=oneffice.getListViewMgr();b.m_CurThumbnailViewListData=[];b.m_aStrUpperFolderSeq=[{parentSeq:"",curTitle:"ONEFFICE"}];b.m_bChkListInit=!1;b.m_bDirectFolder=!1;b.m_nCheckLstInitMode=0;b.m_bThumbSortLayerMenu=!1;b.m_nListViewType=DRIVE_FILE_VIEW.FILE_ITEM;b.m_ctrlThumbnailPanel=null;a.innerHTML=
"";(a=oneffice.m_FileItemListDiv)||(a=document.getElementById("dze_idx_filelist"));a&&((a=a.parentElement)||(a=document.getElementById("dze_idx_filelist_container")),a=a.previousElementSibling.lastElementChild)&&(a.firstElementChild.firstElementChild.src=g_dzEditorBasePath+"image/cloud/btn_view_list_on.png",a.lastElementChild.firstElementChild.src=g_dzEditorBasePath+"image/cloud/btn_view_thumb_normal.png")}};this.convertFileListData=function(a){try{var b={};b.seq=a.seq;b.type=a.fileType.toString();
b.folderSeq=a.parentFolderSeq;b.content_size=a.docData.nContentSize;b.content=a.docData.strContents;b.subject=a.docData.strTitle;b.regdate=a.docData.strCreatedDate;b.moddate=a.docData.strModifiedDate;b.accessdate=a.docData.strAccessedDate;b.keyword=a.docData.strKeywords;b.deleted=a.docData.bDeleted.toString();b.readonly=a.docData.bViewer.toString();b.important=a.docData.bStar.toString();b.security_key=a.docData.bSecurity.toString();b.strThumbnail=a.docData.strThumbnail;b.share_id=a.shareData.nSharedID;
b.share_type=a.shareData.nShareType;b.share_perm=a.shareData.cSharePermission;b.share_date=a.shareData.strShareDate;b.share_count=a.shareData.nShareCount;b.owner_id=a.userData.nOwnerID;b.owner_name=a.userData.strOwnerName;b.owner_org_id=a.userData.nDepartmentID;b.owner_org_name=a.userData.strDepartment;return b}catch(c){dalert(c)}};this.setThumbData=function(a){try{var b={};b.seq=a.seq;b.fileType=parseInt(a.type,10)?1:0;b.type=b.fileType;b.parentFolderSeq=a.folderSeq;b.nIdxCurItemList="";b.owner_change=
a.owner_change;b.docData={};b.docData.type=b.type;b.docData.seq=b.seq;b.docData.nContentSize=a.content_size;b.docData.strContents=a.content;b.docData.strTitle=a.subject;b.docData.strCreatedDate=a.regdate;b.docData.strModifiedDate=a.moddate;b.docData.strAccessedDate=a.accessdate;b.docData.strKeywords=a.keyword;b.docData.bDeleted=a.deleted.length?parseInt(a.deleted,10):!1;b.docData.bViewer=0<parseInt(a.readonly,10)?!0:!1;b.docData.bStar=this.getValue(a.important);b.docData.bSecurity=0<parseInt(a.security_key,
10)?!0:!1;b.docData.owner_change=b.owner_change;b.docData.strThumbnail=a.strThumbnail;b.docData.nDBIdx=0;b.shareData={};b.shareData.nShareType=a.share_type;b.shareData.cSharePermission=a.share_perm;b.shareData.strShareDate=a.share_date;b.shareData.nShareCount=a.share_count;b.userData={};b.userData.nSharedID=a.share_id;b.userData.strSharedName=a.share_name;b.userData.strSharedOrgName=a.share_org_name;b.userData.nOwnerID=a.owner_id;b.userData.strOwnerName=a.owner_name;b.userData.nOwnerDeptID=a.owner_org_id;
b.userData.strOwnerDeptName=a.owner_org_name;return b}catch(c){dalert(c)}};this.setShareThumbData=function(a){try{var b={};b.share_id=a.share_id;fnObjectCheckNull(a.share_name)||(b.share_name=a.share_name);fnObjectCheckNull(a.share_org_name)||(b.share_org_name=a.share_org_name);b.nOwnerID=a.owner_id;fnObjectCheckNull(a.owner_name)||(b.owner_name=a.owner_name);fnObjectCheckNull(a.owner_org_id)||(b.owner_org_id=a.owner_org_id);fnObjectCheckNull(a.owner_org_name)||(b.owner_org_name=a.owner_org_name);
b.share_perm=a.share_perm;b.share_date=a.share_date;b.share_type=a.share_type;return b}catch(c){dalert(c)}};this.isRootFolder=function(a){try{return 1<this.m_aStrUpperFolderSeq.length||!fnObjectCheckNull(a)&&a.length?!1:!0}catch(b){dalert(b)}};this.setCurThumbListData=function(a,b){try{var c=oneffice.getListViewMgr();c.getListViewType();var d=a=!1;oneffice_cloud_currentBrowserMode===CLOUD_CONST_BROWSER_MODE_MYONEFFICE&&""===oneffice_cloud_currFolderSeq&&(a=!0);this.m_CurThumbnailViewListData.length&&
(this.m_CurThumbnailViewListData=[]);b=void 0!=b?b:oneffice_cloud_currentItemList;var g=b.length;if(!g)return!0;for(var f=[],h=[],l=0;l<g;l++){var k=this.setThumbData(b[l]);onefficeCommon.isOnefficeGuideDoc(k.seq)&&(d=!0,h.push(k));k.nIdxCurItemList=l;0<k.fileType&&!onefficeCommon.isOnefficeGuideDoc(k.seq)?this.m_CurThumbnailViewListData.push(k):onefficeCommon.isOnefficeGuideDoc(k.seq)||f.push(k)}if(!a||d||oneffice_cloud_currentBrowserMode==CLOUD_CONST_BROWSER_MODE_UNIFIED_SEARCH)c.m_CurThumbnailViewListData=
h.concat(c.m_CurThumbnailViewListData);c.m_CurThumbnailViewListData=f.concat(c.m_CurThumbnailViewListData);return!0}catch(p){dalert(p)}};this.getValue=function(a){try{if(fnObjectCheckNull(a))return 0;if(a.length){if("number"===typeof a)return parseInt(a,10);if("string"===typeof a){if("Y"==a)return 1;if("N"!=a){var b=parseInt(a,10);if(!isNaN(b))return b}}}return 0}catch(c){dalert(c)}};this.isFolder=function(a){try{return fnObjectCheckNull(a)?!1:this.m_nListViewType?!a.fileType:!parseInt(a.type,10)}catch(b){dalert(b)}};
this.isFile=function(a){try{return fnObjectCheckNull(a)?!1:this.m_nListViewType?a.fileType:parseInt(a.type,10)}catch(b){dalert(b)}};this.isImportant=function(a){try{return fnObjectCheckNull(a)?!1:this.m_nListViewType?a.docData.bStar:parseInt(a.important,10)}catch(b){dalert(b)}};this.isSecurity=function(a){try{if(fnObjectCheckNull(a))return!1;var b=void 0!=a.docData?a.docData.bSecurity:parseInt(a.security_key,10);oneffice_cloud_currentBrowserMode===CLOUD_CONST_BROWSER_MODE_SECURITY&&(b=!0);return b}catch(c){dalert(c)}};
this.isReadOnly=function(a){try{return fnObjectCheckNull(a)?!1:this.m_nListViewType?a.docData.bViewer:parseInt(a.readonly,10)}catch(b){dalert(b)}};this.getDocTitle=function(a){try{return fnObjectCheckNull(a)?!1:this.m_nListViewType?a.docData.strTitle:a.subject}catch(b){dalert(b)}};this.getShareType=function(a){try{return fnObjectCheckNull(a)?!1:this.m_nListViewType?a.shareData.nShareType:a.share_type}catch(b){dalert(b)}};this.getDocRegDate=function(a){try{return fnObjectCheckNull(a)?!1:this.m_nListViewType?
a.docData.strCreatedDate:a.regdate}catch(b){dalert(b)}};this.getShareOwnerName=function(a){try{return fnObjectCheckNull(a)?!1:this.m_nListViewType?a.userData.strOwnerName:a.owner_name}catch(b){dalert(b)}};this.getShareOwnerDeptID=function(a){try{return fnObjectCheckNull(a)?!1:this.m_nListViewType?a.userData.nOwnerDeptID:a.owner_org_id}catch(b){dalert(b)}};this.getShareOwnerDeptName=function(a){try{return fnObjectCheckNull(a)?!1:this.m_nListViewType?a.userData.strOwnerDeptName:a.owner_org_name}catch(b){dalert(b)}};
this.getSharedName=function(a){try{return fnObjectCheckNull(a)?!1:this.m_nListViewType?a.userData.strSharedName:a.share_name}catch(b){dalert(b)}};this.getShareOrgName=function(a){try{return fnObjectCheckNull(a)?!1:this.m_nListViewType?a.userData.strSharedOrgName:a.share_org_name}catch(b){dalert(b)}};this.getShareID=function(a){try{return fnObjectCheckNull(a)?!1:this.m_nListViewType?a.userData.nSharedID:a.share_id}catch(b){dalert(b)}};this.getShareOwnerID=function(a){try{return fnObjectCheckNull(a)?
!1:this.m_nListViewType?a.userData.nOwnerID:a.owner_id}catch(b){dalert(b)}};this.getSharePerm=function(a){try{return fnObjectCheckNull(a)?!1:this.m_nListViewType?a.shareData.cSharePermission:a.share_perm}catch(b){dalert(b)}};this.changeListViewInfo=function(){this.changeFolderInfo();this.changeListView();updateCloudContainerSize();setScrollEventHandler()};this.setListViewType=function(a,b){try{if(void 0===b&&(b=!1),this.m_nListViewType!=a||b){if(onefficeUtil.m_UserEnvConfig&&onefficeUtil.m_UserEnvConfig.user_env){var c=
duzon_http.parseJSON(onefficeUtil.m_UserEnvConfig.user_env);c.viewThumbFileMode!=a&&(c.viewThumbFileMode=a,onefficeUtil.m_UserEnvConfig.user_env=c,onefficeCommon.updateOnefficeUserEnv(JSON.stringify(c)))}this.m_nListViewType=a;this.changeRightViewBtn();this.changeFolderInfo();var d=this.getSearchMgr();oneffice_cloud_currentBrowserMode!=CLOUD_CONST_BROWSER_MODE_UNIFIED_SEARCH&&oneffice_cloud_currentBrowserMode!=CLOUD_CONST_BROWSER_MODE_SEARCH_RESULT?this.changeListView():d&&d.makeSearchListView(a);
updateCloudContainerSize(!0);setScrollEventHandler()}}catch(g){dalert(g)}};this.getListViewType=function(){return this.m_nListViewType};this.getThumbListView=function(){return this.m_ctrlThumbnailPanel};this.setThumbListView=function(a){this.m_ctrlThumbnailPanel=a};this.updateMenuItem=function(){try{var a=dzeJ("#dze_idx_cloud_control_menu");if(a&&0!==a.length){var b=this.getMenuList();g_arrCloudMenu.forEach(function(c){var d=a.find("#"+g_arrCloudCmd[c].id);0<=b.indexOf(c)?d.show():d.hide()});var c=
this.getSelectionInfo();c&&1===c.getCount()?dzeJ("#dze_idx_cloud_menu_information").css("visibility","visible"):dzeJ("#dze_idx_cloud_menu_information").css("visibility","hidden");this.checkMenuTextShow()}}catch(d){dalert(d)}};this.makeMenuItem=function(a){var b=g_arrCloudCmd[a];if(b){var c=document.createElement("div");c.className="cloud_menu_button";c.id=b.id;c.style.display="none";var d=document.createElement("img");d.className="cloud_menu_image_button";d.src=b.src;d.title=b.text;c.appendChild(d);
if(a===CLOUD_CMD_MORE)c.style.marginLeft="-3px",c.style.marginRight="4px";else{var g=document.createElement("span");g.appendChild(document.createTextNode(b.text));g.className="cloud_menu_text";c.appendChild(g)}c.onmousedown=function(){d.src=b.src.replace("-normal.","-click.");c.style.color="#009cff"};c.onmouseout=function(){a!==CLOUD_CMD_MORE&&(d.src=d.src.replace("-click.","-normal."));c.style.color=""};c.onmouseup=function(){d.src=d.src.replace("-click.","-normal.");c.style.color=""};c.onclick=
function(b){executeCloudCommand(b,a,c)};return c}};this.getMenuList=function(){try{var a=this.getMenuListAtTab(),b=this.getMenuListAtSelection();return a.filter(function(a){return-1!==b.indexOf(a)})}catch(c){dalert(c)}};this.getMenuListAtTab=function(){try{var a=null;switch(oneffice_cloud_currentBrowserMode){case CLOUD_CONST_BROWSER_MODE_MYONEFFICE:a=[CLOUD_CMD_SHARE,CLOUD_CMD_CREATE_FOLDER,CLOUD_CMD_MOVE,CLOUD_CMD_COPY,CLOUD_CMD_DELETE,CLOUD_CMD_MERGE,CLOUD_CMD_MORE];break;case CLOUD_CONST_BROWSER_MODE_MY_SHARE_LIST:a=
[CLOUD_CMD_SHARE,CLOUD_CMD_MOVE,CLOUD_CMD_COPY,CLOUD_CMD_DELETE,CLOUD_CMD_MERGE,CLOUD_CMD_LINK_COPY,CLOUD_CMD_MORE];break;case CLOUD_CONST_BROWSER_MODE_SHARED_BY_LIST:a=[CLOUD_CMD_CLONE,CLOUD_CMD_MERGE,CLOUD_CMD_LINK_COPY,CLOUD_CMD_UNLINK];break;case CLOUD_CONST_BROWSER_MODE_SHARE:a=[CLOUD_CMD_SHARE,CLOUD_CMD_MOVE,CLOUD_CMD_COPY,CLOUD_CMD_CLONE,CLOUD_CMD_DELETE,CLOUD_CMD_MERGE,CLOUD_CMD_LINK_COPY,CLOUD_CMD_UNLINK,CLOUD_CMD_MORE];break;case CLOUD_CONST_BROWSER_MODE_RECENT:a=[CLOUD_CMD_SHARE,CLOUD_CMD_CLONE,
CLOUD_CMD_COPY,CLOUD_CMD_DELETE,CLOUD_CMD_MERGE,CLOUD_CMD_LINK_COPY,CLOUD_CMD_UNLINK,CLOUD_CMD_DELETE_RECENT,CLOUD_CMD_MORE];break;case CLOUD_CONST_BROWSER_MODE_FAVORITE:a=[CLOUD_CMD_SHARE,CLOUD_CMD_MOVE,CLOUD_CMD_COPY,CLOUD_CMD_DELETE,CLOUD_CMD_MERGE,CLOUD_CMD_MORE];break;case CLOUD_CONST_BROWSER_MODE_SECURITY:a=[CLOUD_CMD_SHARE,CLOUD_CMD_MOVE,CLOUD_CMD_COPY,CLOUD_CMD_DELETE,CLOUD_CMD_MORE];break;case CLOUD_CONST_BROWSER_MODE_TRASHBOX:a=[CLOUD_CMD_RECOVERY,CLOUD_CMD_DELETE_COMPLETE];break;case CLOUD_CONST_BROWSER_MODE_SEARCH_RESULT:case CLOUD_CONST_BROWSER_MODE_UNIFIED_SEARCH:a=
[CLOUD_CMD_SHARE,CLOUD_CMD_CREATE_FOLDER,CLOUD_CMD_MOVE,CLOUD_CMD_COPY,CLOUD_CMD_DELETE,CLOUD_CMD_MERGE,CLOUD_CMD_CLONE,CLOUD_CMD_LINK_COPY,CLOUD_CMD_UNLINK,CLOUD_CMD_MORE];break;case CLOUD_CONST_BROWSER_MODE_NEWSROOM:case CLOUD_CONST_BROWSER_MODE_MYNEWS_LIST:a=[CLOUD_CMD_COPY,CLOUD_CMD_DELETE,CLOUD_CMD_MORE];break;case CLOUD_CONST_BROWSER_MODE_SEND_MYNEWS_LIST:a=[CLOUD_CMD_DELETE,CLOUD_CMD_MORE];break;default:a=[]}return a}catch(b){dalert(b)}};this.getMenuListAtSelection=function(){try{var a=this.getSelectionInfo();
if(!a)return[];var b=oneffice_cloud_currentBrowserMode,c=a.getMyDocCount(),d=a.getShareInCount(),g=a.getShareOutCount(),f=a.getSecurityCount(),h=a.getCount(),l=a.getFileCount(),k=a.getFolderCount(),p=a.isExistedRegNews(),n=1<h,m=[];g_arrCloudMenu.forEach(function(a){var r=!1;switch(a){case CLOUD_CMD_UNLINK:b===CLOUD_CONST_BROWSER_MODE_RECENT||n||1!==l||d!==h||(r=!0);break;case CLOUD_CMD_SHARE:0===k&&0<l&&c===h&&(r=!0);break;case CLOUD_CMD_MOVE:0<h&&c===h&&(r=!0);break;case CLOUD_CMD_DELETE:0<h&&c===
h&&(r=!0);break;case CLOUD_CMD_COPY:n||1!==l||c!==l||p||(r=!0);break;case CLOUD_CMD_CLONE:n||1!==l||0!==c||(r=!0);break;case CLOUD_CMD_DELETE_RECENT:n||1!==l||0!==c||(r=!0);break;case CLOUD_CMD_RECOVERY:0<h&&c===h&&(r=!0);break;case CLOUD_CMD_OPEN:n||1!==l||(r=!0);break;case CLOUD_CMD_LINK_COPY:n||1!==l||1!==d&&1!=g||(r=!0);break;case CLOUD_CMD_MERGE:if(chkBrowserSearchMode())break;0!==h&&b!==CLOUD_CONST_BROWSER_MODE_SHARE&&b!==CLOUD_CONST_BROWSER_MODE_SHARED_BY_LIST&&b!==CLOUD_CONST_BROWSER_MODE_RECENT||
0!==f||(r=!0);break;case CLOUD_CMD_DELETE_COMPLETE:0<h&&c===h&&(r=!0);break;case CLOUD_CMD_CREATE_FOLDER:chkBrowserSearchMode()||(r=!0)}r&&m.push(a)});0<getMoreMenuList(m).length&&0<c&&m.push(CLOUD_CMD_MORE);return m}catch(t){dalert(t)}};this.makeRightCtrl=function(){try{g_objTagUtil.removeChild(document.getElementById("dze_idx_cloud_right_control"),null,null);var a=document.createElement("div");a.className="cloud_toolbar_right_menu";a.id="dze_idx_cloud_right_control";var b=document.createElement("div");
b.id="dze_idx_cloud_control_menu";this.getMenuListAtTab().forEach(function(a){b.appendChild(this.makeMenuItem(a))});var c=document.createElement("div");c.className="cloud_menu_seperate_line";if(oneffice_cloud_currentBrowserMode===CLOUD_CONST_BROWSER_MODE_RECENT){var d=document.createElement("div");d.id="dze_idx_cloud_control_filter";var g=document.createElement("span");g.classList.add("dze_idx_cloud_control_hover");g.style.paddingLeft="7px";g.style.paddingRight="7px";g.style.marginRight="-2px";g.innerHTML=
convertToText(m_FilterOption)+'<span class="popup_control_arrow">\u25bc</span>';g.onclick=function(a){createFilterMenu(this)};d.style.float="left";d.appendChild(g)}var f=document.createElement("div");f.id="dze_idx_cloud_control_sort";var h=document.createElement("span");h.style.paddingLeft="7px";h.style.paddingRight="7px";h.style.marginRight="-2px";var l=convertToText(m_SortOption);oneffice_cloud_currentBrowserMode===CLOUD_CONST_BROWSER_MODE_RECENT&&m_FilterOption!=CLOUD_CMD_FILTER_BY?h.style.cursor=
"default":(h.classList.add("dze_idx_cloud_control_hover"),l+='<span class="popup_control_arrow">\u25bc</span>',h.onclick=function(a){createSortMenu(this)});h.innerHTML=l;f.style.float="left";f.appendChild(h);var k=oneffice.getListViewMgr();if(oneffice_cloud_currentBrowserMode!==CLOUD_CONST_BROWSER_MODE_RECENT){var p=document.createElement("span");p.className="dze_idx_cloud_control_hover";p.onclick=function(a){k.m_nSortArrowImgDegree=-m_nSortArrowImgDegree;updateSortFileList()};p.innerHTML=0>k.m_nSortArrowImgDegree?
'<img id="dze_icon_sort_img" src="image/cloud/icon-sort-ascend-normal.png" style="vertical-align: middle;" />':'<img id="dze_icon_sort_img" src="image/cloud/icon-sort-descend-normal.png" style="vertical-align: middle;" />';f.appendChild(p)}else f.style.marginRight="10px";var n=g_dzEditorBasePath+(1==this.m_nListViewType?"image/cloud/btn_view_thumb_on.png":"image/cloud/btn_view_thumb_normal.png"),m=document.createElement("button");m.id="dze_idx_cloud_menu_thumb_view";m.className="cloud_icon_button";
m.style.padding="0px 5px 0px 5px";m.innerHTML='<img width="16px" height="16px" src="'+n+'" style="float: left; vertical-align: middle;" />';m.onclick=function(a){a=oneffice.getListViewMgr();a.getListViewType()!=DRIVE_FILE_VIEW.THUMBNAIL_ITEM&&a.setListViewType(DRIVE_FILE_VIEW.THUMBNAIL_ITEM);chkBrowserSearchMode()&&resetCheckListFunc(!1);changeCss(".cloud_container","min-width","740px",document)};var t=g_dzEditorBasePath+(0==this.m_nListViewType?"image/cloud/btn_view_list_on.png":"image/cloud/btn_view_list_normal.png"),
r=document.createElement("button");r.id="dze_idx_cloud_menu_filelist_view";r.className="cloud_icon_button";r.style.padding="0px 5px 0px 5px";r.innerHTML='<img width="16px" height="16px" src="'+t+'" style="float: left; vertical-align: middle;" />';r.onclick=function(a){a=oneffice.getListViewMgr();a.getListViewType()!=DRIVE_FILE_VIEW.FILE_ITEM&&a.setListViewType(DRIVE_FILE_VIEW.FILE_ITEM);chkBrowserSearchMode()&&resetCheckListFunc(!1);changeCss(".cloud_container","min-width","1024px",document)};var q=
document.createElement("div");q.id="dze_idx_cloud_menu_information";q.onclick=function(a){openInformationPanel()};a.appendChild(b);a.appendChild(c);oneffice_cloud_currentBrowserMode===CLOUD_CONST_BROWSER_MODE_RECENT&&a.appendChild(d);a.appendChild(f);a.appendChild(m);a.appendChild(r);a.appendChild(q);return a}catch(u){dalert(u)}return null};this.checkMenuTextShow=function(){try{var a=!0;1024>=window.innerWidth&&(a=!1);var b=dzeJ("#dze_idx_cloud_right_control").find(".cloud_menu_text");a?b.css("display",
""):b.css("display","none")}catch(c){dalert(c)}};this.changeListFolderInfo=function(a){try{var b=oneffice.getListViewMgr();switch(this.getListViewType()){default:case DRIVE_FILE_VIEW.FILE_ITEM:this.updateFolderInfo(!0,a);b.updateSortCtrlInfo(b.m_SortType,!1);break;case DRIVE_FILE_VIEW.THUMBNAIL_ITEM:this.updateFolderInfo(!1,a),b.updateSortCtrlInfo(b.m_SortType,!0)}}catch(c){dalert(c)}};this.changeFolderInfo=function(){try{var a=null,b=oneffice.m_FileItemListDiv;b||(b=document.getElementById("dze_idx_filelist"));
if(b){var c=b.parentElement;c||(c=document.getElementById("dze_idx_filelist_container"));c&&(a=c.firstElementChild,this.changeListFolderInfo(a))}}catch(d){dalert(d)}};this.changeRightViewBtn=function(){try{if(oneffice.getListViewMgr(),document.getElementById("dze_idx_filelist_container")){var a=document.getElementById("dze_idx_toolbar_menu_list"),b=document.getElementById("dze_idx_cloud_menu_filelist_view"),c=document.getElementById("dze_idx_cloud_menu_thumb_view");if(a&&b&&c)switch(this.getListViewType()){default:case DRIVE_FILE_VIEW.FILE_ITEM:b.firstElementChild.src=
g_dzEditorBasePath+"image/cloud/btn_view_list_on.png";c.firstElementChild.src=g_dzEditorBasePath+"image/cloud/btn_view_thumb_normal.png";break;case DRIVE_FILE_VIEW.THUMBNAIL_ITEM:b.firstElementChild.src=g_dzEditorBasePath+"image/cloud/btn_view_list_normal.png",c.firstElementChild.src=g_dzEditorBasePath+"image/cloud/btn_view_thumb_on.png"}}}catch(d){dalert(d)}};this.changeListView=function(){try{oneffice.getListViewMgr();var a=oneffice.m_FileItemListDiv;a||(a=document.getElementById("dze_idx_filelist"));
if(a){var b=a.parentElement;b||(b=document.getElementById("dze_idx_filelist_container"));var c=g_searchMgr.getSearchType()==SEARCH_TYPE.CUR&&g_searchMgr.getKeyword().length?!0:!1;switch(this.getListViewType()){default:case DRIVE_FILE_VIEW.FILE_ITEM:var d=a.nextElementSibling;"drive_thumbnailItemPanel"==d.id&&this.changeListViewDisplay(!1);break;case DRIVE_FILE_VIEW.THUMBNAIL_ITEM:d=a.nextElementSibling;if("drive_thumbnailItemPanel"!=d.id){var g=document.createElement("div");g.id="drive_thumbnailItemPanel";
g.className="cloud_thumb_list";g.style.position="relative";g.style.textAlign="margin-left:auto;margin-right:auto;";g.style.verticalAlign="middle";g.style.height="0px";this.setThumbListView(g);this.createThumbnailView(c?"":oneffice_cloud_currFolderSeq);b.insertBefore(g,a.nextElementSibling);thumbPanelEle=g}else thumbPanelEle.childElementCount||this.createThumbnailView(oneffice_cloud_currFolderSeq);"drive_thumbnailItemPanel"==thumbPanelEle.id&&this.changeListViewDisplay(!0)}}}catch(f){dalert(f)}};this.changeListViewDisplay=
function(a){var b=oneffice.m_FileItemListDiv;b||(b=document.getElementById("dze_idx_filelist"));var c=b.nextElementSibling;"drive_thumbnailItemPanel"==c.id?a?(this.syncChkThumbList2(),b.style.display="none",c.style.display=""):(this.syncChkFileList2(),b.style.display="",c.style.display="none"):this.changeListViewInfo()};this.resetCheckListFunc=function(a){try{oneffice_cloud_checkedItemList=[];var b=oneffice.getListViewMgr(),c=document.getElementById("dze_idx_browser_right_container"),d=c.getElementsByClassName("file_checked"),
g=d.length,f=c.getElementsByClassName("list_checked"),h=f.length;for(c=g-1;0<=c;c--){var l=d[c];l&&(l.classList.remove("file_checked"),l.checked=!1)}for(d=h-1;0<=d;d--){var k=f[d];k&&(k.classList.remove("list_checked"),k.checked=!1)}a||b.updateMenuItem()}catch(p){dalert(p)}};this.thumbItemBtnClkListener=function(a,b){try{var c=oneffice.getListViewMgr(),d=a.currentTarget,g=DZESHORTCUT.isPressedKeyMapForOS(a,ID_KEYCODE_CTRL),f=a.shiftKey;(!g&&!f||chkBrowserSearchMode())&&0>d.className.indexOf("file_checked")&&
resetCheckListFunc(!0);fnObjectCheckNull(d)&&(d=a.target.offsetParent);fnObjectCheckNull(b);if(d){a=!1;c=oneffice.getListViewMgr();var h=c.getBtnIdx(d,2);c.getDataIdx(h);0<=d.outerHTML.search("image/cloud/icon_folder_upper.png")&&(a=!0);if(".."===d.getElementsByClassName("cloud_thumbnail_item_title")[0].getElementsByTagName("div")[0].textContent)return!1;if(f&&firstShiftBtn&&!chkBrowserSearchMode()){resetCheckListFunc(!0);var l=c.getBtnIdx(firstShiftBtn,2);b=l<=h?h:l;for(h=l<=h?l:h;h<=b;h++){var k=
document.getElementById("drive_thumbnailItem_"+h),p=c.m_CurThumbnailViewListData[c.getDataIdx(h)];0>k.getAttribute("seq").indexOf("ONEFFICE_CLOUD")&&""!=k.getAttribute("seq")&&(k.classList.add("file_checked"),k.checked=!0,updateCheckedItemList(k,p))}}else{if(!a)if(0>d.className.indexOf("file_checked"))d.classList.add("file_checked"),d.checked=!0;else if(f||g)d.classList.remove("file_checked"),d.checked=!1;updateCheckedItemList(d,b)}}}catch(n){dalert(n)}};this.thumbItemBtnDblClkListener=function(a,
b){try{if(!0===g_browserCHK.mobile){var c=a.target;if(!1===fnObjectCheckNull(c)){var d=c.nodeName.toLowerCase();if(d===DZE_TAG_IMG){var g=c.src;if(!1===fnObjectCheckNull(g)&&(0<g.indexOf("ico_cloud_share_")||0<g.indexOf("icon_important_")))return}else if(d===DZE_TAG_INPUT)return}}var f=a.currentTarget;fnObjectCheckNull(f)&&(f=a.target.offsetParent);if(f){var h=0;a=null;d=c=!1;g=oneffice_cloud_currentBrowserMode;var l=oneffice.getListViewMgr(),k=l.getBtnIdx(f,2),p=l.getDataIdx(k);0<=f.outerHTML.search("image/cloud/icon_folder_upper.png")&&
(c=!0);var n=fnObjectCheckNull(b)?l.m_CurThumbnailViewListData[p]:b;n&&(h=n.seq,d=n.fileType?!1:!0,a=n.docData);if(returnPageTrash(!d&&!c))return!1;d||c?(l.m_bChkListInit=!0,l.m_nCheckLstInitMode=CHECKLISTINITMODE.MOVE_FOLDER,b=null,c?(b=l.updateRootFolderStack(),l.updatePath(h,""),h=b.parentSeq):CLOUD_CONST_BROWSER_MODE_FAVORITE!=g?(l.m_aStrUpperFolderSeq[l.m_aStrUpperFolderSeq.length-1].curTitle!=a.strTitle&&l.m_aStrUpperFolderSeq.push(d?{parentSeq:n.parentFolderSeq,curTitle:a.strTitle}:{seq:"",
title:"ONEFFICE"}),l.updatePath(h,a.strTitle)):(l.m_bDirectFolder=!0,changeCurBrowserMode(CLOUD_CONST_BROWSER_MODE_MYONEFFICE),selectBrowserFolderItem(h,!0)),(c||CLOUD_CONST_BROWSER_MODE_FAVORITE!=g)&&l.openFolderProcess(h)):1!=a.bDeleted&&(oneffice_cloud_currentBrowserMode!==CLOUD_CONST_BROWSER_MODE_SHARE&&oneffice_cloud_currentBrowserMode!==CLOUD_CONST_BROWSER_MODE_SHARED_BY_LIST&&oneffice_cloud_currentBrowserMode!==CLOUD_CONST_BROWSER_MODE_RECENT||0!==n.shareData.nShareCount||n.userData.nOwnerID==
oneffice_cloud_myInfoData.id?onefficeGW.openDocument(h):oneffice_cloud_currentBrowserMode===CLOUD_CONST_BROWSER_MODE_RECENT?onefficeCommon.getTempFileContent(h,function(a){1==a?onefficeGW.openDocument(h):cmnCtrlToast.showToastMsg(null,ID_RES_CONST_STRING_RECENT_NO_SHARE_DOCUMENT,2,"screen_center",!0,TOAST_TYPE_OPTION_ERROR)}):cmnCtrlToast.showToastMsg(null,ID_RES_CONST_STRING_RECENT_NO_SHARE_DOCUMENT,2,"screen_center",!0,TOAST_TYPE_OPTION_ERROR))}}catch(m){dalert(m)}};this.selectFile=function(a){try{if(a){var b=
null,c=null,d=null;this.m_nListViewType===DRIVE_FILE_VIEW.THUMBNAIL_ITEM?(b="div.cloud_thumbnail_item",c="file_checked",d=function(a){return this.m_CurThumbnailViewListData[this.getDataIdx(this.getBtnIdx(a,2))]}.bind(this)):(b="div.cloud_file_list_item",c="list_checked",d=function(a){return oneffice_cloud_currentItemList[this.getBtnIdx(a,2)]}.bind(this));var g=[],f=[];dzeJ(b).each(function(b,c){(b=c.getAttribute("seq"))&&-1<a.indexOf(b)&&(f.push(c),g.push(b))});var h=g.length;if(!(0>=h))for(oneffice_cloud_checkedItemList=
[],this.resetCheckListFunc(),b=0;b<h;b++){var l=f[b],k=d(l);k&&(oneffice_cloud_checkedItemList.push(k),l.classList.add(c),l.checked=!0)}}}catch(p){dalert(p)}};this.openFolderProcess=function(a){try{oneffice.getListViewMgr(),onefficeGW.getFileList(a,"",CLOUD_CONST_BROWSER_MODE_MYONEFFICE,"",function(b){oneffice_cloud_currFolderSeq=a;makeFileListView(b,oneffice.m_FileItemListDiv,!0,oneffice_cloud_currFolderSeq);viewFolderPathInfo(oneffice_cloud_currFolderSeq);resetBrowserFolderSelection(oneffice_cloud_currFolderSeq)})}catch(b){dalert(b)}};
this.updatePath=function(a,b){try{var c=oneffice.getListViewMgr(),d=c.m_aStrUpperFolderSeq.length,g=document.getElementById("dze_idx_folderlist");g.getAttribute("folderPathSeq");var f=g.firstElementChild,h=f.childElementCount;d=2*d-1;if(h!=d)if(g.setAttribute("folderPathSeq",a),g.nextElementSibling.setAttribute("folderPathSeq",a),h<d){f.lastElementChild.style.fontWeight="normal";f.lastElementChild.style.cursor="pointer";var l=document.createElement("span");l.innerHTML="&nbsp;&gt;&nbsp;";l.className=
"folder_nav_list_item";f.appendChild(l);var k=document.createElement("span");k.innerHTML=b;k.style.fontWeight="bold";k.id=a+"tmp";k.addEventListener("click",c.pathClickListener,!1);k.className="folder_nav_list_item";f.appendChild(k)}else 1!=h&&(f.removeChild(f.childNodes[h-1]),f.removeChild(f.childNodes[h-2]),f.lastElementChild.style.fontWeight="bold")}catch(p){dalert(p)}};this.pathClickListener=function(a){try{var b=oneffice.getListViewMgr(),c=!0,d=b.m_aStrUpperFolderSeq.length,g=parseFloat(a.currentTarget.id,
10).toString();if(d&&oneffice_cloud_currFolderSeq!=g){do{var f=b.updateRootFolderStack();if(!f)break;f.parentSeq==g&&(c=!1);b.updatePath(f.parentSeq,"")}while(c);b.openFolderProcess(g)}}catch(h){dalert(h)}};this.createThumbItemDiv=function(a,b,c){try{c=!0===fnObjectCheckNull(c)?!1:c;var d=document.createElement("div");d.className="cloud_thumbnail_item";d.id=c?"templateItem_"+b:"drive_thumbnailItem_"+b;a.appendChild(d);return d}catch(g){dalert(g)}};this.createThumbItemTB=function(a,b,c){try{c=!0===
fnObjectCheckNull(c)?!1:c;var d=document.createElement("div");d.className="cloud_thumbnail_item_TB";d.id=c?"template_thumb_item_TB"+b:"thumb_item_TB"+b;a.appendChild(d);return d}catch(g){dalert(g)}};this.checkDirectFolderSeq=function(a){try{for(var b=a.length;this.m_aStrUpperFolderSeq.length;)this.m_aStrUpperFolderSeq.pop();for(--b;0<b;b--)this.m_aStrUpperFolderSeq.unshift({parentSeq:a[b-1][0],curTitle:a[b][1]});this.m_aStrUpperFolderSeq.unshift({parentSeq:"",curTitle:"ONEFFICE"});this.m_bDirectFolder=
!1}catch(c){dalert(c)}};this.createTemplateThumbnailView=function(a,b){try{var c=oneffice.getListViewMgr(),d=document.getElementById("dze_idx_cloud_template_list_panel"),g=document.createElement("div");g.style.display="inline-block";for(var f=0;f<b.length;f++)c.makeTemplateThumbnailItem(g,f,a,b[f]);d.appendChild(g)}catch(h){dalert(h)}};this.makeTemplateThumbnailItem=function(a,b,c,d){try{var g=oneffice.getListViewMgr(),f=document.createElement("div");f.style.float="left";f.style.height="280px";f.style.marginBottom=
"10px";a.appendChild(f);var h=document.createElement("table");h.setAttribute("cellspacing","0");h.setAttribute("cellpadding","0");f.appendChild(h);var l=h.insertRow().insertCell(),k=g.createThumbItemDiv(l,b,!0),p=g.createThumbItemTB(k,b,!0);k.style.marginTop="0px";k.style.marginBottom="5px";this.makeTemplateThumbnail(p,"image/doc_form/"+d.thumb_src,b,d);var n=h.insertRow().insertCell(),m=document.createElement("div");m.className="cloud_template_thumbnail_text";m.innerText=d.name;n.appendChild(m);
k.setAttribute("file_category",d.data);k.addEventListener("click",g.templateListItemBtnClickListener,!1)}catch(t){dalert(t)}};this.createRecentThumbnailView=function(a,b){try{var c=oneffice.getListViewMgr(),d=dzeJ("#dze_idx_cloud_template_list_panel");if(!fnObjectCheckNull(d)){var g=b.length,f=d.children().length;if(f!=g)for(--f;f>=g;f--){var h=d.index(f);fnObjectCheckNull(h)||dzeJ(h).css("display","none")}for(d=0;d<g;d++)c.makeRecentThumbnailItem(d,a,b[d])}}catch(l){dalert(l)}};this.makeRecentThumbnailItem=
function(a,b,c){try{var d=oneffice.getListViewMgr(),g=document.getElementById("dze_idx_cloud_template_list_panel"),f=null,h=d.setThumbData(c),l=h.docData,k=h.shareData,p=h.userData;h=null;var n=!1;g.childElementCount<a+1?(f=d.createThumbItemDiv(g,a,!0),h=d.createThumbItemTB(f,a,!0)):(n=!0,f=g.childNodes[a],h=f.firstElementChild,"none"==f.style.display&&(f.style.display=""));g=f;1!=g_browserCHK.mobile?g.addEventListener("dblclick",d.thumbItemBtnDblClkListener,!1):g.addEventListener("click",d.thumbItemBtnDblClkListener,
!1);var m=parseInt(k.nShareCount,10)?DOC_SHARE_STATUS.SHARE:DOC_SHARE_STATUS.NONE;this.makeDocThumbnail(h,"image/cloud/ico_thumb_file_oneffice.png",a,n,!1,b,l.strThumbnail,c);this.makeDocTitle(h,a,l,n,m,b);this.makeDocDate(h,convertDate(l,1),n);this.makeDocOwner(h,p,n);this.makeDocInfoOthers(h,l,m,n,b)}catch(t){dalert(t)}};this.createThumbnailView=function(a,b){try{var c=oneffice.getListViewMgr(),d=c.getThumbListView();this.isSeparate=!1;if(!(fnObjectCheckNull(d)||d&&"drive_thumbnailItemPanel"!=d.id)){var g=
c.m_CurThumbnailViewListData.length,f=d.childElementCount;f=d.childElementCount;if(!b&&f!=g)for(var h=f-1;h>=g;h--){var l=d.childNodes[h];fnObjectCheckNull(l)||(l.style.display="none")}oneffice_cloud_currentBrowserMode!==CLOUD_CONST_BROWSER_MODE_RECENT&&c.removeDateSeperate();c.removeFolderSeperate();oneffice_cloud_currentBrowserMode==CLOUD_CONST_BROWSER_MODE_MYONEFFICE&&a.length&&this.makeFolderUpperLvl(f);this.removeDateSeperate();d=d=0;b&&(dzeJ("#dze_idx_separate_folder").remove(),d=oneffice.currentShareListOffset,
g=oneffice.currentShareListOffset+oneffice.currentShareListLimit);for(b=d;b<g;b++)c.makeThumbnailItem(b,a,f);0==oneffice_cloud_currFolderSeq&&""==oneffice_cloud_currFolderSeq||oneffice_cloud_currentBrowserMode!=CLOUD_CONST_BROWSER_MODE_MYONEFFICE||onefficeGW.getFolderContent(oneffice_cloud_currFolderSeq,function(a){a=c.setThumbData(a);oneffice_cloud_currFolderList=[];oneffice_cloud_currFolderList.push(a)})}}catch(k){dalert(k)}};this.addDateSeperate=function(a,b,c){try{var d=new Date,g=c.split("-");
if(!(fnObjectCheckNull(g)||3>g.length)){var f=g[0],h=g[1],l=g[2].split(" ")[0];calculateDateDiff(new Date(f,h,l),new Date(d.getFullYear(),d.getMonth()+1,d.getDate()))}}catch(k){dalert(k)}};this.removeDateSeperate=function(){try{dzeJ("#dze_idx_recent_seperate_today").remove(),dzeJ("#dze_idx_recent_seperate_week").remove(),dzeJ("#dze_idx_recent_seperate_ago").remove()}catch(a){dalert(a)}};this.addDateSeperateList=function(a,b,c){try{var d=new Date,g=c.split("-");if(!(fnObjectCheckNull(g)||3>g.length)){var f=
g[0],h=g[1],l=g[2].split(" ")[0];calculateDateDiff(new Date(f,h,l),new Date(d.getFullYear(),d.getMonth()+1,d.getDate()))}}catch(k){dalert(k)}};this.addFolderSeperate=function(a,b,c){try{if(c)isSeparate=!1;else if(!isSeparate){var d=document.createElement("p");d.id="dze_idx_separate_folder";a.insertBefore(d,b);isSeparate=!0}}catch(g){dalert(g)}};this.removeFolderSeperate=function(){try{dzeJ("#dze_idx_separate_folder").remove()}catch(a){dalert(a)}};this.makeDocFolder=function(a,b,c,d,g,f,h,l){try{oneffice.getListViewMgr();
g=g_dzEditorBasePath;var k=g+=b,p=b=null;d&&a.rows[0]&&(b=a.rows[0].cells[0]);if(b)b.firstElementChild.innerHTML='<img width ="152px"; height ="40px"; src="'+(g_objThumbMgr.m_thumbURL.length?g_objOnefficeShot.m_thumbURL:g)+'" style="    padding: 15px 15px 0 15px;">';else{b=a.insertRow().insertCell();b.id="thumbnailItemContents"+c;b.style.textAlign="center";b.style.height="45px";var n=document.createElement("div");n.style.overflow="hidden";n.style.height="186px";var m='<img width ="152px"; height ="40px"; src="'+
(g_objThumbMgr.m_thumbURL.length?g_objOnefficeShot.m_thumbURL:g)+'" style="    padding: 15px 15px 0 15px;">';n.innerHTML=m;b.innerHTML=m;b.appendChild(n);p=n.firstElementChild}p&&function(){var a=p;a.onload=function(){};a.onerror=function(){a.src=k}}()}catch(t){dalert(t)}};this.makeThumbnailItem=function(a,b,c){try{var d=oneffice.getListViewMgr(),g=d.getListViewType(),f=d.getThumbListView(),h=null,l=d.getBtnIdx2(a,b),k=d.m_CurThumbnailViewListData[a];if(void 0!==k){var p=k.seq,n=k.fileType?!1:!0,
m=k.docData,t=k.shareData,r=k.userData;c&&(h=f.getElementsByClassName("cloud_thumbnail_item")[l])&&"none"==h.style.display&&(h.style.display="");fnObjectCheckNull(h)&&(h=d.createThumbItemDiv(f,l));h.classList.remove("file_checked");h.setAttribute("seq",p);oneffice_cloud_currentBrowserMode===CLOUD_CONST_BROWSER_MODE_RECENT&&d.addDateSeperate(f,h,m.strModifiedDate);oneffice_cloud_currentBrowserMode!==CLOUD_CONST_BROWSER_MODE_SHARE&&oneffice_cloud_currentBrowserMode!==CLOUD_CONST_BROWSER_MODE_MY_SHARE_LIST&&
oneffice_cloud_currentBrowserMode!==CLOUD_CONST_BROWSER_MODE_SHARED_BY_LIST&&d.addFolderSeperate(f,h,n);var q=document.getElementById("dze_idx_toolbar_menu_list");(function(){function a(){var a=document.getElementById("drive_thumbnailItemPanel");dzeJ(a).off("mousemove");dzeJ(q).off("mouseover");(a=document.getElementById("copyDiv"))&&a.parentNode.removeChild(a)}function b(b){if(q){var c=document.getElementById("drive_thumbnailItemPanel");dzeJ(q).on("mouseover",function(a){dzeJ(c).animate({scrollTop:1},
1E3)}).on("mouseout",function(a){dzeJ(c).stop()})}var d=document.getElementById("drive_thumbnailItemPanel"),g=document.createElement("div");g.id="copyDiv";g.style.opacity="0";g.style.position="relative";for(var f=document.getElementsByClassName("file_checked"),h=f.length,l=0;l<f.length;l++){var k=dzeJ(f[l]).clone()[0];k.style.position="absolute";k.style.transform="scale(0.5)";k.style.transformOrigin="top left";k.style.left=4*h+-4*l+"px";k.style.top=3*h+-3*l+"px";k.style.zIndex="1000";g.appendChild(k)}d.appendChild(g);
var m=0;dzeJ(d).on("mousemove",function(a){var b=a.pageX+2;a=a.pageY-dzeJ(g).height()/2;m++;10==m&&(dzeJ(this).addClass("dragMouse"),g.style.opacity="0.5");dzeJ(g).offset({left:b-13,top:a-3})}).on("mouseup",function(c){m=0;dzeJ(this).removeClass("dragMouse");dzeJ(b).removeClass("movable");a()})}var c=h,g=d.m_CurThumbnailViewListData;dzeJ(c).off("mousedown");dzeJ(c).off("mouseup");firstShiftBtn=lastSelectBtn=null;a();dzeJ(c).on("mousedown",function(a){onefficeCommon.isOnefficeGuideDoc(k.seq)||(thumbItemBtnClkListener(a,
k),oneffice_cloud_currentBrowserMode===CLOUD_CONST_BROWSER_MODE_MYONEFFICE&&(dzeJ(this).addClass("movable"),0>this.className.indexOf("file_checked")||b(this)))}).on("mouseup",function(a){var b=document.getElementById("copyDiv"),g=DZESHORTCUT.isPressedKeyMapForOS(a,ID_KEYCODE_CTRL),f=a.shiftKey;a=a.currentTarget;var h=a.getElementsByClassName("cloud_thumbnail_item_Folder");(null===b||null!=b&&"0"===b.style.opacity)&&!g&&!f&&0<a.className.indexOf("file_checked")&&(1===oneffice_cloud_checkedItemList.length&&
a.getAttribute("seq")===oneffice_cloud_checkedItemList[0].seq&&lastSelectBtn===a?resetCheckListFunc(!0):(firstShiftBtn=lastSelectBtn=null,0<oneffice_cloud_checkedItemList.length&&resetCheckListFunc(!0),a.classList.add("file_checked"),a.checked=!0,updateCheckedItemList(c,k)));if(0<h.length&&0>a.className.indexOf("movable")&&b){if(0<a.className.indexOf("file_checked")){f||g?!firstShiftBtn&&f&&(firstShiftBtn=a):firstShiftBtn=a;lastSelectBtn=a;return}b=a.getAttribute("seq");checkCopyListTo(oneffice_cloud_checkedItemList,
b,!0)}else if(lastSelectBtn!=a||(g||f)&&!chkBrowserSearchMode()){if(f&&!chkBrowserSearchMode()){null==firstShiftBtn&&null==lastSelectBtn?lastSelectBtn=firstShiftBtn=a:null!=firstShiftBtn&&(lastSelectBtn=a);d.updateMenuItem();return}g&&!chkBrowserSearchMode()&&(firstShiftBtn=a);if(!g&&!f||chkBrowserSearchMode())firstShiftBtn=lastSelectBtn=a,c.className.indexOf("file_checked");lastSelectBtn=a}else a.classList.remove("file_checked"),a.checked=!1,firstShiftBtn=lastSelectBtn=null,resetCheckListFunc(!0),
d.updateMenuItem();d.updateMenuItem()}).on("mouseover",function(a){});g_browserCHK.mobile||oneffice_cloud_currentBrowserMode!=CLOUD_CONST_BROWSER_MODE_UNIFIED_SEARCH?1!=g_browserCHK.mobile?c.addEventListener("dblclick",d.thumbItemBtnDblClkListener,!1):c.addEventListener("click",d.thumbItemBtnDblClkListener,!1):(c.onClick=function(){var a=oneffice.getListViewMgr();a.m_CurThumbnailViewListData=g;var b=0,c=null,d=!1;k&&(b=k.seq,d=k.fileType?!1:!0,c=k.docData);d?(this.m_bDirectFolder=!0,changeCurBrowserMode(CLOUD_CONST_BROWSER_MODE_MYONEFFICE),
selectBrowserFolderItem(b,!0),a.openFolderProcess(b)):1!=c.bDeleted&&(oneffice_cloud_currentBrowserMode!==CLOUD_CONST_BROWSER_MODE_SHARE&&oneffice_cloud_currentBrowserMode!==CLOUD_CONST_BROWSER_MODE_SHARED_BY_LIST&&oneffice_cloud_currentBrowserMode!==CLOUD_CONST_BROWSER_MODE_RECENT||0!==k.shareData.nShareCount||k.userData.nOwnerID==oneffice_cloud_myInfoData.id?onefficeGW.openDocument(b):oneffice_cloud_currentBrowserMode===CLOUD_CONST_BROWSER_MODE_RECENT?onefficeCommon.getTempFileContent(b,function(a){1==
a?onefficeGW.openDocument(b):cmnCtrlToast.showToastMsg(null,ID_RES_CONST_STRING_RECENT_NO_SHARE_DOCUMENT,2,"screen_center",!0,TOAST_TYPE_OPTION_ERROR)}):cmnCtrlToast.showToastMsg(null,ID_RES_CONST_STRING_RECENT_NO_SHARE_DOCUMENT,2,"screen_center",!0,TOAST_TYPE_OPTION_ERROR))},c.ondblclick=function(){var a=oneffice.getListViewMgr();a.m_CurThumbnailViewListData=g.slice();var b=0,c=null,d=!1;k&&(b=k.seq,d=k.fileType?!1:!0,c=k.docData);d?(a.m_bDirectFolder=!0,oneffice_cloud_currentBrowserMode!==CLOUD_CONST_BROWSER_MODE_MYONEFFICE&&
(oneffice_cloud_SearchMode&&searchCloudEnd(!1),changeCurBrowserMode(CLOUD_CONST_BROWSER_MODE_MYONEFFICE)),selectBrowserFolderItem(b),a.openFolderProcess(b)):1!=c.bDeleted&&(oneffice_cloud_currentBrowserMode!==CLOUD_CONST_BROWSER_MODE_SHARE&&oneffice_cloud_currentBrowserMode!==CLOUD_CONST_BROWSER_MODE_SHARED_BY_LIST&&oneffice_cloud_currentBrowserMode!==CLOUD_CONST_BROWSER_MODE_RECENT||0!==k.shareData.nShareCount||k.userData.nOwnerID==oneffice_cloud_myInfoData.id?onefficeGW.openDocument(b):oneffice_cloud_currentBrowserMode===
CLOUD_CONST_BROWSER_MODE_RECENT?onefficeCommon.getTempFileContent(b,function(a){1==a?onefficeGW.openDocument(b):cmnCtrlToast.showToastMsg(null,ID_RES_CONST_STRING_RECENT_NO_SHARE_DOCUMENT,2,"screen_center",!0,TOAST_TYPE_OPTION_ERROR)}):cmnCtrlToast.showToastMsg(null,ID_RES_CONST_STRING_RECENT_NO_SHARE_DOCUMENT,2,"screen_center",!0,TOAST_TYPE_OPTION_ERROR))})})();f=null;c&&(f=h.firstElementChild);fnObjectCheckNull(f)&&(f=d.createThumbItemTB(h,l));f.className=n?"cloud_thumbnail_item_Folder":"cloud_thumbnail_item_TB";
m&&m.strTitle&&(f.title=m.strTitle);var u=parseInt(t.nShareCount,10)?DOC_SHARE_STATUS.SHARE:DOC_SHARE_STATUS.NONE;if((oneffice_cloud_currentBrowserMode==CLOUD_CONST_BROWSER_MODE_SHARE||oneffice_cloud_currentBrowserMode==CLOUD_CONST_BROWSER_MODE_SHARED_BY_LIST||oneffice_cloud_currentBrowserMode==CLOUD_CONST_BROWSER_MODE_UNIFIED_SEARCH||oneffice_cloud_currentBrowserMode==CLOUD_CONST_BROWSER_MODE_RECENT||oneffice_cloud_currentBrowserMode==CLOUD_CONST_BROWSER_MODE_SEARCH_RESULT)&&0<t.nShareCount){var v=
d.getSearchMgr();!m.bDeleted&&(r.nOwnerID==oneffice_cloud_myInfoData.id||v&&v.getSearchType()==SEARCH_TYPE.MYONEFFICE)?u=DOC_SHARE_STATUS.SHARE:r.nOwnerID!=oneffice_cloud_myInfoData.id&&(u=DOC_SHARE_STATUS.SHARED)}v=n?"image/cloud/icon_folder.png":"image/cloud/ico_thumb_file_oneffice.png";var w=!1;g&&(w=this.syncChkList(p,k));this.makeDocThumbnail(f,v,l,c,w,p,m.strThumbnail,k);this.makeDocTitle(f,a,m,c,u,b);n?(this.makeDocDate(f,"<div>&nbsp;</div>",c),this.makeDocInfoOthers(f,m,0,c,0)):(m.strShareDate=
t.strShareDate,this.makeDocDate(f,convertDate(m,1),c),this.makeDocOwner(f,r,c),this.makeDocInfoOthers(f,m,u,c,p,r))}}catch(x){dalert(x)}};this.isSupportThumbPath=function(a){try{var b=a.split(" ");b=b[0].split("-");var c=parseInt(b[0],10),d=parseInt(b[1],10),g=parseInt(b[2],10);if(2018<=c)if(d==SUPPORT_THUMBPATH_MONTH){if(g>=SUPPORT_THUMBPATH_DATE)return!0}else if(d>SUPPORT_THUMBPATH_MONTH)return!0;return!1}catch(f){dalert(f)}};this.syncChkFileList2=function(){try{for(var a=document.getElementById("dze_idx_filelist").getElementsByClassName("cloud_file_list_item"),
b=0;b<a.length;b++){var c=a[b],d=c.getAttribute("seq");oneffice_cloud_checkedItemList.length||c.classList.remove("list_checked");for(j=0;j<oneffice_cloud_checkedItemList.length;j++)if(d==oneffice_cloud_checkedItemList[j].seq){c.classList.add("list_checked");c.checked=!0;break}else 0<c.className.indexOf("list_checked")&&(c.classList.remove("list_checked"),c.checked=!1)}}catch(g){dalert(g)}};this.syncChkFileList=function(a,b){try{var c=null,d=null;"number"!=typeof a&&(a=0);switch(a){case SEARCH_TYPE.MYONEFFICE:d=
document.getElementById("dze_idx_search_myoneffice_list").getElementsByClassName("cloud_folder_info_item_checkbtn");break;case SEARCH_TYPE.SHAREOUT:d=document.getElementById("dze_idx_search_shareout_list").getElementsByClassName("cloud_folder_info_item_checkbtn");break;case SEARCH_TYPE.SHAREIN:d=document.getElementById("dze_idx_search_sharein_list").getElementsByClassName("cloud_folder_info_item_checkbtn");break;default:c=document.getElementById("dze_idx_filelist"),d=c.getElementsByClassName("cloud_folder_info_item_checkbtn")}c=
0;for(var g=null,f=0;f<d.length;f++){var h=d[f],l=h.getAttribute("checkedItemSeq");g=null;if(oneffice_cloud_checkedItemList.length){for(c=0;c<oneffice_cloud_checkedItemList.length;c++)if(g=oneffice_cloud_checkedItemList[c],l==g.seq){h.checked=!0;h.parentElement.style.backgroundColor="#CFF1FF";break}else h.checked=!1,h.parentElement.style.backgroundColor="#FFFFFF",g=null;if(g){var k=null;k=a?b[g.nIdxCurItemList]:oneffice_cloud_currentItemList[g.nIdxCurItemList];oneffice_cloud_checkedItemList.splice(c,
1,k)}}else h.checked&&(h.checked=!1,h.parentElement.style.backgroundColor="#FFFFFF")}}catch(p){dalert(p)}};this.syncChkThumbList2=function(){try{for(var a=document.getElementById("drive_thumbnailItemPanel").getElementsByClassName("cloud_thumbnail_item"),b=0;b<a.length;b++){var c=a[b],d=c.getAttribute("seq");oneffice_cloud_checkedItemList.length||c.classList.remove("file_checked");for(j=0;j<oneffice_cloud_checkedItemList.length;j++)if(d==oneffice_cloud_checkedItemList[j].seq){c.classList.add("file_checked");
c.checked=!0;break}else 0<c.className.indexOf("file_checked")&&(c.classList.remove("file_checked"),c.checked=!1)}}catch(g){dalert(g)}};this.syncChkThumbList=function(a){try{var b=0,c=!1,d=null,g=a.childElementCount;if(g){var f=oneffice.getListViewMgr(),h=a.firstElementChild;for(a=0;a<g&&"none"!=h.style.display;a++){var l=h.firstElementChild.rows[0].cells[0].firstElementChild.firstElementChild;if("none"==l.style.display)break;var k=f.getBtnIdx(l,1);l.disabled&&(c=!0);if(!l.disabled){var p=f.getDataIdx2(c,
k),n=this.m_CurThumbnailViewListData[p],m=n.seq;if(oneffice_cloud_checkedItemList.length){for(b=0;b<oneffice_cloud_checkedItemList.length;b++){d=oneffice_cloud_checkedItemList[b];if(!d){g_objCommonUtil.displayErrorAlert(e,"driveFileListViewMgr::syncChkThumbList");break}if(m==d.seq){l.classList.add("file_checked");l.checked=!0;break}else l.classList.remove("file_checked"),l.checked=!1,d=null}d&&(oneffice_cloud_checkedItemList.splice(b,1,n),d=null)}else l.checked&&(l.checked=!1)}h=h.nextElementSibling}}}catch(t){dalert(t)}};
this.syncChkList=function(a,b){if(!oneffice_cloud_checkedItemList.length)return!1;var c=-1;for(i=0;i<oneffice_cloud_checkedItemList.length;i++)if(oneffice_cloud_checkedItemList[i].seq==a){c=i;break}return-1!=c?(oneffice_cloud_checkedItemList.splice(c,1,b),!0):!1};this.makeFolderUpperLvl=function(a){try{var b=oneffice.getListViewMgr(),c=b.getThumbListView(),d=c.childNodes[0];fnObjectCheckNull(d)&&(d=b.createThumbItemDiv(c,0));"none"==d.style.display&&(d.style.display="");d.classList.remove("file_checked");
d.setAttribute("seq",m_aStrUpperFolderSeq[m_aStrUpperFolderSeq.length-1].parentSeq);c=d;1!=g_browserCHK.mobile?c.addEventListener("dblclick",b.thumbItemBtnDblClkListener,!1):c.addEventListener("click",b.thumbItemBtnDblClkListener,!1);var g=d.firstElementChild;fnObjectCheckNull(g)&&(g=b.createThumbItemTB(d,0));g.className="cloud_thumbnail_item_Folder";this.makeDocThumbnail(g,"image/cloud/icon_folder_upper.png",0,a,!1,0,"",null);this.makeDocTitle(g,"_Upper","..",a);this.makeDocDate(g,"<div>&nbsp;</div>",
a);this.makeDocInfoOthers(g,null,0,a,0)}catch(f){dalert(f)}};this.makeTemplateThumbnail=function(a,b,c,d){try{oneffice.getListViewMgr();var g=g_dzEditorBasePath;g+=b;var f=document.createElement("div");f.id="thumbnailItemContents"+c;f.style.textAlign="center";f.style.height="230px";f.style.paddingTop="6px";var h=document.createElement("div");h.style.overflow="hidden";h.style.height="230px";h.style.width="180px";h.innerHTML='<img class="thumbnailImg" width ="150px"  src="'+(g_objThumbMgr.m_thumbURL.length?
g_objOnefficeShot.m_thumbURL:g)+'" style="vertical-align:middle; padding: 5px 5px 5px 5px;">';f.appendChild(h);a.appendChild(f);f.style.display=d&&0!=d.fileType?"":"none"}catch(l){dalert(l)}};this.makeDocThumbnail=function(a,b,c,d,g,f,h,l){try{oneffice.getListViewMgr();g=g_dzEditorBasePath;var k=g+=b,p=null;if("image/cloud/icon_folder_upper.png"!=b)if((p=onefficeCommon.getOnefficeGuideDoc(f))&&p.path){var n=p.path;g=n=dzeEnvConfig.strPath_Document+n+"/"+n+"_thumb.png"}else if("image/cloud/ico_thumb_file_oneffice.png"==
b&&f&&h.length){var m=(new Date).getTime();g=0<=ONEFFICE_SERVER_API_BASE_PATH.search("/gw/onefficeApi/")?ONEFFICE_SERVER_API_GET_ATTACHMENTDATA:oneffice.bUseOnexFile?ONEFFICE_SERVER_API_GET_ATTACHMENTDATA:g_dzEditorBasePath+"server/server_get_attachfile.jsp";g+="?seq="+h+"&_t="+m}var t=b=null;d&&a.childNodes[0]&&(b=a.childNodes[0]);if(b){if("DIV"!==b.nodeName)return!1;var r=b.firstElementChild;u='<img class="thumbnailImg" width ="150px"  src="'+(g_objThumbMgr.m_thumbURL.length?g_objOnefficeShot.m_thumbURL:
g)+'" style="vertical-align:middle;    padding: 15px 15px 0 15px;">';r.innerHTML=u;t=r.firstElementChild}else{b=document.createElement("div");b.id="thumbnailItemContents"+c;b.className="cloud_thumbnail_item_thumb";var q=document.createElement("div");q.style.overflow="hidden";q.style.height="186px";q.style.width="180px";q.style.lineHeight="186px";var u='<img class="thumbnailImg" width ="150px"  src="'+(g_objThumbMgr.m_thumbURL.length?g_objOnefficeShot.m_thumbURL:g)+'" style="vertical-align:middle;    padding: 15px 15px 0 15px;">';
q.innerHTML=u;b.appendChild(q);t=q.firstElementChild;a.appendChild(b)}b.style.display=l&&0!=l.fileType?"":"none";t&&function(){var a=t;a.onload=function(){this.naturalHeight<this.naturalWidth&&200<this.naturalWidth&&(this.height=165,this.width=this.height/this.naturalHeight*this.naturalWidth)};a.onerror=function(){a.src=k}}()}catch(v){dalert(v)}};this.updateRootFolderStack=function(a){try{var b=oneffice.getListViewMgr(),c=null;b.m_aStrUpperFolderSeq.length&&(c=b.m_aStrUpperFolderSeq.pop());if(!fnObjectCheckNull(a))for(;c&&
c.parentSeq!=a;)c=b.m_aStrUpperFolderSeq.pop();return c}catch(d){dalert(d)}};this.getDataIdx2=function(a,b){return a&&b?b-1:b};this.getDataIdx=function(a){try{var b=a,c=oneffice.getListViewMgr();a&&!c.isRootFolder()&&(b=a-1);return b}catch(d){dalert(d)}};this.getBtnIdx=function(a,b){try{var c=a.id.split("_");return parseInt(c[b],10)}catch(d){dalert(d)}};this.getBtnIdx2=function(a,b){try{return oneffice_cloud_currentBrowserMode==CLOUD_CONST_BROWSER_MODE_MYONEFFICE&&!fnObjectCheckNull(b)&&b.length&&
a++,a}catch(c){dalert(c)}};this.updateCheckedItemList=function(a,b){try{for(var c=oneffice_cloud_checkedItemList.length,d=0;d<c;d++){var g=oneffice_cloud_checkedItemList[d];if(a.checked){if(b.seq==g.seq)return}else if(b.seq==g.seq){oneffice_cloud_checkedItemList.splice(d,1);return}}a.checked&&oneffice_cloud_checkedItemList.push(b)}catch(f){dalert(f)}};this.makeDocTitle=function(a,b,c,d,g,f){try{var h=null;d&&a.childNodes[1]&&(h=a.childNodes[1]);h||(h=document.createElement("div"),h.id="thumb_item_title_TD"+
b,a.appendChild(h));var l=c&&c.seq?a.parentNode.getAttribute("seq"):"",k=!c||c&&0===c.type;"_Upper"==b&&(k=!0);a=h.innerHTML="";a=c.bStar&&g!=DOC_SHARE_STATUS.SHARED?g_dzEditorBasePath+"image/cloud/icon_important_on.png":g_dzEditorBasePath+"image/cloud/icon_important_normal.png";var p=f&&g!=DOC_SHARE_STATUS.SHARED?"1":"0.5",n=document.createElement("img");n.className="cloud_doc_star_img";n.src=a;var m=document.createElement("img");m.src=g_dzEditorBasePath+"image/cloud/ico_cloud_renewal_list_folder.png";
var t=!0===fnObjectCheckNull(c.strTitle)?c:c.strTitle,r=document.createElement("div");r.className="cloud_thumb_doc_title";r.innerHTML=t;k||(r.style.width="144px");var q=this.getSearchMgr().getKeyword();if(!1===fnObjectCheckNull(q)&&0<q.length){var u=r.innerHTML.toLowerCase().indexOf(q.toLowerCase());if(0<=u){var v=r.innerHTML.substr(u,q.length);r.innerHTML=r.innerHTML.replace(v,makeSearchMatchSpan(v))}}if(k){h.className="cloud_thumbnail_item_title cloud_thumbnail_folder_title";n.setAttribute("style",
"margin-left:5px;opacity:"+(f&&g!=DOC_SHARE_STATUS.SHARED?"1":"0")+";");m.setAttribute("style","float:left;margin-right:10px;");r.style.flexGrow=1;var w=document.createElement("img");w.src=g_dzEditorBasePath+"image/cloud/icon-chgown.png";w.setAttribute("style",(c.owner_change?"":"display:none;")+"margin-left:5px;");w.setAttribute("ico_chg_own","");w.seq=l;h.appendChild(m);h.appendChild(r);h.appendChild(w);0<l.length&&h.appendChild(n)}else h.className="cloud_thumbnail_item_title",onefficeCommon.isOnefficeGuideDoc(c.seq)?
(r.innerHTML=t.replace("\n","<br>"),r.style.margin="0 5px",r.style.height="38px",r.style.lineHeight=1.5):(n.setAttribute("style","float:left;margin-right:5px;margin-top:1px;opacity:"+p+";"),h.appendChild(n)),m.setAttribute("style","display:none;"),h.appendChild(m),h.appendChild(r);g!=DOC_SHARE_STATUS.SHARED&&function(){var a=c.bStar;n.onclick=function(){onefficeGW.setFavorite(l,a?!1:!0)};n.onmouseover=function(){n.style.cursor="pointer"};n.onmouseout=function(){n.style.cursor="arrow"}}()}catch(x){dalert(x)}};
this.makeDocDate=function(a,b,c){try{var d=null;c&&a.childNodes[2]&&(d=a.childNodes[2]);d||(d=document.createElement("div"),d.className="cloud_thumbnail_item_date_n_info",a.appendChild(d));d.innerHTML=convertDateDiff(b)}catch(g){dalert(g)}};this.makeDocOwner=function(a,b,c){try{var d=4<b.strOwnerName.length?b.strOwnerName.substr(0,4):b.strOwnerName,g=a.querySelector(".cloud_thumbnail_item_date_n_info");g&&(g.innerHTML=g.innerHTML+" "+d)}catch(f){dalert(f)}};this.makeDocInfoOthers=function(a,b,c,d,
g,f){try{var h=d=null;a&&a.childNodes[2]&&(d=a.childNodes[2]);d||(d=document.createElement("div"),d.className="cloud_thumbnail_item_date_n_info",a.appendChild(d));0===d.childElementCount?(h=document.createElement("div"),h.className="cloud_thumb_doc_info_img_container",d.appendChild(h)):(h=d.lastElementChild,h.innerHTML="");var l=g&&c!=DOC_SHARE_STATUS.SHARED?"1":"0.5";if(b&&1===b.type){if(b.bViewer){var k=document.createElement("img");k.src=g_dzEditorBasePath+"image/cloud/icon-doc-readonly.png";k.className=
"cloud_thumb_doc_info_img";k.style.opacity=l;h.appendChild(k)}oneffice_cloud_currentBrowserMode===CLOUD_CONST_BROWSER_MODE_RECENT&&(""!=b.strShareDate&&f.nOwnerID===oneffice_cloud_myInfoData.id&&0<c&&(c=1),f.nOwnerID!=oneffice_cloud_myInfoData.id&&(c=2));if(c){var p=document.createElement("img");p.src=c===DOC_SHARE_STATUS.SHARE?g_dzEditorBasePath+"image/cloud/ico_cloud_renewal_share_out.png":g_dzEditorBasePath+"image/cloud/ico_cloud_renewal_share_in.png";p.className="cloud_thumb_doc_info_img";p.style.opacity=
l;p.onclick=function(a){showDialogDocumentShareInfo(a,g)};h.appendChild(p)}if(0!=b.bSecurity){var n=document.createElement("img");n.src=g_dzEditorBasePath+"image/cloud/icon-doc-security.png";n.className="cloud_thumb_doc_info_img";n.style.opacity=l;h.appendChild(n)}if((oneffice_cloud_currentBrowserMode===CLOUD_CONST_BROWSER_MODE_NEWSROOM||oneffice_cloud_currentBrowserMode===CLOUD_CONST_BROWSER_MODE_SEND_MYNEWS_LIST||oneffice_cloud_currentBrowserMode===CLOUD_CONST_BROWSER_MODE_FAVORITE||oneffice_cloud_currentBrowserMode===
CLOUD_CONST_BROWSER_MODE_TRASHBOX)&&onefficeUtil.isRegArticle(g)){var m=document.createElement("img");m.src=g_dzEditorBasePath+"image/cloud/icon-doc-register.png";m.className="cloud_thumb_doc_info_img";m.style.opacity=l;h.appendChild(m)}if(h){var q=document.createElement("img");q.src=g_dzEditorBasePath+"image/cloud/icon-chgown.png";q.className="cloud_thumb_doc_info_img";q.style.display=b.owner_change?"":"none";q.setAttribute("ico_chg_own","");q.seq=b.seq;h.appendChild(q)}}}catch(r){dalert(r)}};this.displayThumbSortLayerMenu=
function(a){try{if(null!==oneffice.m_FileItemListDiv){var b=oneffice.getListViewMgr(),c=oneffice.m_FileItemListDiv.parentElement.lastElementChild;c&&"dze_id_thumb_sortmenu_layer"==c.id&&(a?(oneffice_cloud_currentBrowserMode!=CLOUD_CONST_BROWSER_MODE_SHARE&&(c.lastElementChild.style.display="none"),c.style.display="none",b.m_bThumbSortLayerMenu=!1):(oneffice_cloud_currentBrowserMode==CLOUD_CONST_BROWSER_MODE_SHARE&&(c.lastElementChild.style.display=""),c.style.display="",b.m_bThumbSortLayerMenu=!0))}}catch(d){dalert(d)}};
this.createListItem=function(a){try{var b=document.createElement("div");b.innerHTML=g_objComboBoxWin.arrSortType[a];b.style.width="110px";b.style.height="22px";b.style.backgroundColor="#ffffff";b.id="sortType_"+a;b.onclick=function(a){a=oneffice.getListViewMgr();var b=this.id.split("_");b=parseInt(b[1]);var c=VIEWSORT.NAME;if(a.m_SortType==b)a.m_nSortArrowImgDegree=-a.m_nSortArrowImgDegree,c=a.m_SortType;else switch(a.m_nSortArrowImgDegree=-90,b){case 0:c=VIEWSORT.NAME;break;case 1:c=VIEWSORT.SIZE;
break;case 2:c=VIEWSORT.MODDATE;a.m_nSortArrowImgDegree=-a.m_nSortArrowImgDegree;break;case 4:c=VIEWSORT.OWNER;break;case 3:c=VIEWSORT.SHAREDATE,a.m_nSortArrowImgDegree=-a.m_nSortArrowImgDegree}a.updateSortCtrlInfo(c,!0);onefficeUtil.SortFileList(oneffice_cloud_currentItemList,a.m_nSortArrowImgDegree);a.getThumbListView()&&a.setCurThumbListData(oneffice_cloud_currFolderSeq);updateFileListView()};b.onmouseover=function(){this.style.backgroundColor="#f2f2f2";this.style.fontweight="bold";this.style.cursor=
"pointer"};b.onmouseout=function(){this.style.backgroundColor="#ffffff";this.style.fontweight="normal";this.style.cursor="arrow"};return b}catch(c){dalert(c)}};this.updateSortCtrlInfo=function(a,b){try{var c=oneffice.getListViewMgr(),d=document.getElementById("dze_idx_folder_info");if(!fnObjectCheckNull(d)){var g=d.firstElementChild.nextElementSibling;c.displayThumbSortLayerMenu(!0);b?c.m_SortType!=a&&(c.m_SortType=a):g.innerHTML=ID_RES_CONST_STRING_DOCUMENT_TITLE}}catch(f){dalert(f)}};this.updateFilterCtrlInfo=
function(a,b){try{var c=oneffice.getListViewMgr(),d=document.getElementById("dze_idx_folder_info");if(!fnObjectCheckNull(d)){var g=d.firstElementChild.nextElementSibling;c.displayThumbSortLayerMenu(!0);b?c.m_FilterType!=a&&(c.m_FilterType=a):g.innerHTML=ID_RES_CONST_STRING_DOCUMENT_TITLE}}catch(f){dalert(f)}};this.setPosSortLayerMenu=function(a){try{if(a||(a=document.getElementById("dze_id_thumb_sortmenu_layer")),a){oneffice.m_FileItemListDiv||(oneffice.m_FileItemListDiv=document.getElementById("dze_idx_filelist"));
var b=oneffice.m_FileItemListDiv.parentElement.firstElementChild,c=b.firstElementChild.nextElementSibling;window.getComputedStyle(c,null).getPropertyValue("padding");var d=b.offsetTop+b.offsetHeight;a.style.left=c.offsetLeft+8+"px";a.style.top=d+"px";return a}}catch(g){dalert(g)}};this.sortLayerMenu=function(a){try{if(null!==g_objComboBoxWin.arrSortType){var b=oneffice.getListViewMgr();if(a){var c=document.createElement("div");c.id="dze_id_thumb_sortmenu_layer";c=this.setPosSortLayerMenu(c);c.width=
"112px";c.height="92px";c.style.border="#7d7d7d 1px solid";c.style.position="absolute";c.style.fontSize="12px";c.style.backgroundColor="white";c.style.zIndex=6E4;var d=g_objComboBoxWin.arrSortType.length;for(a=0;a<d;a++){var g=b.createListItem(a);3!=a&&4!=a||oneffice_cloud_currentBrowserMode==CLOUD_CONST_BROWSER_MODE_SHARE||(g.style.display="none");c.appendChild(g)}c.style.display="none"}return c}}catch(f){dalert(f)}};this.updateFolderInfo=function(a,b){try{if(b){b.style.display=!1===a?"none":"";
a=null;var c=b.parentElement,d=c.id,g=!1;"dze_id_thumb_sortmenu_layer"==c.lastElementChild.id&&(g=!0);g||(a=this.sortLayerMenu(!0))&&c.appendChild(a);for(c=0;c<b.childElementCount;c++)if(b.childNodes[c].innerText===ID_RES_CONST_STRING_OWNER){if(oneffice_cloud_currentBrowserMode==CLOUD_CONST_BROWSER_MODE_SHARE||oneffice_cloud_currentBrowserMode==CLOUD_CONST_BROWSER_MODE_MY_SHARE_LIST||oneffice_cloud_currentBrowserMode==CLOUD_CONST_BROWSER_MODE_SHARED_BY_LIST||oneffice_cloud_currentBrowserMode==CLOUD_CONST_BROWSER_MODE_UNIFIED_SEARCH)b.childNodes[c].style.display=
"","dze_idx_search_shareout_container"!=d&&"dze_idx_search_sharein_container"!=d||updateCloudContainerSize(!0)}else b.childNodes[c].style.display=""}}catch(f){dalert(f)}};this.getFileListContainer=function(a){try{!0===fnObjectCheckNull(a)&&(a=!1);var b=document.createElement("div");b.style.width="500px";var c=document.createElement("div");c.style.display="inline-block";c.style.width="100%";c.style.marginBottom="5px";var d=document.createElement("div");d.id="dze_idx_folderlist_dialog";d.style.width=
"auto";d.style.fontWeight="bold";d.style.overflow="hidden";d.style.float="left";d.style.marginTop="5px";if(!0===a)d.setAttribute("home_dialog",!0);else{var g=g_readonlyMode?" disabled":"",f=document.createElement("div");f.id="dze_idx_open_type";f.style.float="right";f.innerHTML='<input type="radio" name="dze_open_type" value="0" id="dze_open_new_win" checked="checked"><label for="dze_open_new_win">'+ID_RES_CONST_STRING_OPEN_DOCUMENT+'</label>&nbsp;&nbsp;<input type="radio" name="dze_open_type" value="1" id="dze_open_merge"'+
g+'><label for="dze_open_merge">'+ID_RES_CONST_BTN_MERGE_DOCUMENT+"</label>"}var h=document.createElement("div");h.style.width="auto";h.style.height="200px";h.style.overflow="auto";h.id="dze_idx_filelist_pop";h.ondragstart=function(){return!1};h.onselectstart=function(){return!1};var l=document.createElement("div");l.className="duzon_dialog_label_separator";l.style.display="none";var k=document.createElement("div");k.innerHTML=duzon_dialog.getSelectedItemContainer("dze_merge_doc_container",!1);k.style.display=
"none";c.appendChild(d);!1===a&&c.appendChild(f);b.appendChild(c);b.appendChild(h);b.appendChild(l);b.appendChild(k);if(!0===a)k.style.display="",l.style.display="";else{var p=f.querySelector("#dze_open_new_win"),n=f.querySelector("#dze_open_merge");a=function(){p.checked?(k.style.display="none",l.style.display="none"):(k.style.display="",l.style.display="");g_objPositionUtil.setObjectPosition(null,duzon_dialog.dialog_obj)};p.addEventListener("change",a);n.addEventListener("change",a)}return b}catch(m){dalert(m)}};
this.openFileListOnload=function(a,b){try{oneffice.getListViewMgr().viewFileList("",a,void 0,b)}catch(c){dalert(c)}};this.viewFileList=function(a,b,c){try{"undefined"==typeof c&&(c=""),onefficeGW.getFileList(a,c,CLOUD_CONST_BROWSER_MODE_MYONEFFICE,"",function(d){var g=document.getElementById("dze_idx_filelist_pop");g.innerHTML="";var f=null;""!=a&&onefficeGW.getFolderContent(a,function(a){f=document.createElement("div");f.className="dzeFolderList";f.innerHTML='<span style="padding:4px;position:relative;top:6px;"><img src="./image/cloud/ico_cloud_folder.png" width="16" height="16" align="top" /> ..</span>';
f.title=ID_RES_CONST_STRING_MOVE_TO_PARENT_FOLDER;f.ondblclick=function(){var d=oneffice.getListViewMgr();d.viewFileList(a.folderSeq,b,c);d.viewDlgTreeFolderPathInfo("dze_idx_folderlist",a.folderSeq,b,c)};f.onmouseover=function(){this.style.backgroundColor="#f2f2f2"};f.onmouseout=function(){this.style.backgroundColor="#ffffff"};g.insertBefore(f,g.firstChild)});for(var h=0;h<d.length;h++){f=document.createElement("div");""==d[h].subject&&(d[h].subject=oneffice.unTitleMsg+" "+d[h].regdate.replace(/:/g,
"").substr(5,d[h].regdate.length));f.innerHTML="<div style='float:left'>";0==d[h].type?(f.className="dzeFolderList",f.innerHTML+='<div style="float:left;width:300px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding:4px;position:relative;top:2px;"><img src="./image/cloud/ico_cloud_folder.png" width="16" height="16" align="top" /> '+d[h].subject+"</span>"):(f.className="dzeFileList",f.innerHTML+='<div style="float:left;width:300px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding:4px;position:relative;top:2px;"><img src="./image/cloud/ico_cloud_file.png" width="16" height="16" align="top" /> '+
d[h].subject+"</span>");f.innerHTML+="</div>";f.innerHTML=0==d[h].type?f.innerHTML+" <div style='float:right;position:relative;top:6px;'></div>":f.innerHTML+(" <div style='float:right;position:relative;top:6px;'>"+d[h].moddate.replace(/\-/g,"/").substr(2,14)+"</div>");if(1==d[h].type){var l=onefficeUtil.getFileSizeUnits(d[h].content_size);f.innerHTML+=" <div style='float:right;position:relative;top:6px;margin-right:10px;'>"+l+"</div>"}f.style.cursor="default";(function(){var a=d[h].seq,g=d[h].folderSeq,
l=d[h].type,m=f;m.ondblclick=function(){var d=oneffice.getListViewMgr();0==l?(d.viewFileList(a,b,c),d.viewDlgTreeFolderPathInfo("dze_idx_folderlist",a,b,c)):(d="seq="+a+"&folder="+g,oneffice.onefficeGroupSeq&&"undefined"!==typeof oneffice.onefficeGroupSeq&&(d+="&groupseq="+oneffice.onefficeGroupSeq),d=window.btoa(d),window.open(oneffice.onefficePath+"?"+encodeURIComponent(d),"_blank"))};m.onmouseover=function(){this.style.backgroundColor="#f2f2f2"};m.onmouseout=function(){this.style.backgroundColor=
"#ffffff"}})();g.appendChild(f)}mgr.viewDlgTreeFolderPathInfo("dze_idx_folderlist",a,b,c)})}catch(d){dalert(d)}};this.viewFileList=function(a,b,c,d){try{oneffice.getListViewMgr();"undefined"==typeof c&&(c="");var g=!0===d?CLOUD_CONST_BROWSER_MODE_SHARE:CLOUD_CONST_BROWSER_MODE_MYONEFFICE;if(d===CLOUD_CONST_BROWSER_MODE_FOLDER_SEQ_BASE+CLOUD_CONST_BROWSER_MODE_MY_SHARE_LIST||d===CLOUD_CONST_BROWSER_MODE_FOLDER_SEQ_BASE+CLOUD_CONST_BROWSER_MODE_SHARED_BY_LIST)g=d;onefficeGW.getFileList(a,c,g,"",function(d){var h=
document.getElementById("dze_idx_filelist_pop");h.innerHTML="";var f=null;""!=a&&onefficeGW.getFolderContent(a,function(a){f=document.createElement("div");f.className="dzeFolderList";f.innerHTML='<span style="padding:4px;position:relative;top:6px;"><img src="./image/cloud/ico_cloud_folder.png" width="16" height="16" align="top" /> ..</span>';f.title=ID_RES_CONST_STRING_MOVE_TO_PARENT_FOLDER;!0===g_browserCHK.mobile?f.onclick=function(){var d=oneffice.getListViewMgr();d.viewFileList(a.folderSeq,b,
c);d.viewDlgTreeFolderPathInfo("dze_idx_folderlist_dialog",a.folderSeq,b,c)}:f.ondblclick=function(){var d=oneffice.getListViewMgr();d.viewFileList(a.folderSeq,b,c);d.viewDlgTreeFolderPathInfo("dze_idx_folderlist_dialog",a.folderSeq,b,c)};f.onmouseover=function(){this.style.backgroundColor="#f2f2f2"};f.onmouseout=function(){this.style.backgroundColor="#ffffff"};h.insertBefore(f,h.firstChild)});for(var k=[],p=0;p<d.length;p++)if("1"!==d[p].deleted){if(g===CLOUD_CONST_BROWSER_MODE_FOLDER_SEQ_BASE+CLOUD_CONST_BROWSER_MODE_MY_SHARE_LIST){if(d[p].owner_id!==
oneffice_cloud_myInfoData.id)continue}else if(g===CLOUD_CONST_BROWSER_MODE_FOLDER_SEQ_BASE+CLOUD_CONST_BROWSER_MODE_SHARED_BY_LIST&&d[p].owner_id===oneffice_cloud_myInfoData.id)continue;k.push(d[p])}var n=oneffice.getListViewMgr();n.m_SortType=VIEWSORT.MODDATE;k=onefficeUtil.SortFileList(k,90);for(var m=0;m<k.length;m++)f=document.createElement("div"),""==k[m].subject&&(k[m].subject=oneffice.unTitleMsg+" "+k[m].regdate.replace(/:/g,"").substr(5,k[m].regdate.length)),f.innerHTML="<div style='float:left'>",
0==k[m].type?(f.className="dzeFolderList",f.innerHTML+='<div style="float:left;width:300px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding:4px;position:relative;top:2px;"><img src="./image/cloud/ico_cloud_folder.png" width="16" height="16" align="top" /> '+k[m].subject+"</span>"):(f.className="dzeFileList",f.innerHTML+='<div style="float:left;width:300px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding:4px;position:relative;top:2px;"><img src="./image/cloud/ico_cloud_file.png" width="16" height="16" align="top" /> '+
k[m].subject+"</span>"),f.innerHTML+="</div>",f.innerHTML=0==k[m].type?f.innerHTML+" <div style='float:right;position:relative;top:6px;'></div>":f.innerHTML+(" <div style='float:right;position:relative;top:6px;'>"+k[m].moddate.replace(/\-/g,"/").substr(2,14)+"</div>"),1==k[m].type&&(d=onefficeUtil.getFileSizeUnits(k[m].content_size),f.innerHTML+=" <div style='float:right;position:relative;top:6px;margin-right:10px;'>"+d+"</div>"),f.style.cursor="default",function(){var a=k[m].seq,d=k[m].folderSeq,
g=k[m].type,h=k[m].subject,l=f;!0===g_browserCHK.mobile?l.onclick=function(){n.selectListItem(g,a,b,c,h,d)}:l.ondblclick=function(){n.selectListItem(g,a,b,c,h,d)};l.onmouseover=function(){this.style.backgroundColor="#f2f2f2"};l.onmouseout=function(){this.style.backgroundColor="#ffffff"}}(),h.appendChild(f);n.viewDlgTreeFolderPathInfo("dze_idx_folderlist_dialog",a,b,c,g)})}catch(f){dalert(f)}};this.selectListItem=function(a,b,c,d,g,f){try{var h=oneffice.getListViewMgr();if(0==a)h.viewFileList(b,c,
d),h.viewDlgTreeFolderPathInfo("dze_idx_folderlist_dialog",b,c,d);else{var l=$_("dze_open_merge"),k=document.getElementById("dze_idx_folderlist_dialog"),p=!1===fnObjectCheckNull(k)&&"true"===k.getAttribute("home_dialog");l&&l.checked&&$_("dze_merge_doc_container")||!0===p?duzon_dialog.addSelectedItem({seq:b,subject:g}):(a="seq="+b+"&folder="+f,oneffice.onefficeGroupSeq&&"undefined"!==typeof oneffice.onefficeGroupSeq&&(a+="&groupseq="+oneffice.onefficeGroupSeq),a=window.btoa(a),window.open(oneffice.onefficePath+
"?"+encodeURIComponent(a),"_blank"))}}catch(n){dalert(n)}};this.templateListItemBtnClickListener=function(a,b){a=a.currentTarget.getAttribute("file_category");0<=a.indexOf("category:-1")?newFile(!1):newTemplateFile(a);dlog("template_data_idx = "+a)};this.viewDlgTreeFolderPathInfo=function(a,b,c,d,g){try{"undefined"==typeof d&&(d="");var f=document.getElementById(a);f.style.display="";f.style.visibility="";var h=document.getElementById("dze_idx_save_folder_seq");h&&(h.value=b);onefficeGW.getFolderPathInfo([],
b,function(a){f.innerHTML="";for(var b=null,h=null,l=a.length,m=0;m<l;m++)0<m&&(h=document.createElement("span"),h.className="folder_nav_list_item",h.style.height="auto",h.innerHTML="&nbsp;&gt;&nbsp;",f.appendChild(h)),b=document.createElement("span"),b.innerHTML=g===CLOUD_CONST_BROWSER_MODE_FOLDER_SEQ_BASE+CLOUD_CONST_BROWSER_MODE_MY_SHARE_LIST?ID_RES_CONST_STRING_BROWSER_MY_SHARE_LIST:g===CLOUD_CONST_BROWSER_MODE_FOLDER_SEQ_BASE+CLOUD_CONST_BROWSER_MODE_SHARED_BY_LIST?ID_RES_CONST_STRING_BROWSER_SHARED_BY_LIST:
a[m][1],b.className="folder_nav_list_item",b.style.height="auto",m<l-1?b.style.color="#b2b2b2":b.style.fontWeight="bold",g!==CLOUD_CONST_BROWSER_MODE_FOLDER_SEQ_BASE+CLOUD_CONST_BROWSER_MODE_MY_SHARE_LIST&&g!==CLOUD_CONST_BROWSER_MODE_FOLDER_SEQ_BASE+CLOUD_CONST_BROWSER_MODE_SHARED_BY_LIST&&(b.style.cursor="pointer",function(){var f=a[m][0];b.onclick=function(){var a=oneffice.getListViewMgr();a.viewFileList(f,c,d);a.viewDlgTreeFolderPathInfo("dze_idx_folderlist_dialog",f,c,d)}}()),f.appendChild(b)})}catch(l){dalert(l)}};
return this};
